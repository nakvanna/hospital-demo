(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[27],{5806:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",[n("q-card",[n("q-card-actions",{attrs:{align:"left"}},[n("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],staticStyle:{width:"150px"},attrs:{color:"red",icon:"reply",label:"ត្រឡប់ក្រោយ"}},[n("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("ថយក្រោយ")])],1)],1),n("q-card-section",[n("q-img",{staticStyle:{height:"200px","max-width":"200px"},attrs:{src:t.data.hostname+t.data.photo}},[n("div",{staticClass:"absolute-bottom text-right no-padding"},[n("q-btn",{attrs:{icon:"edit",label:"កែប្រែ",flat:""}},[n("q-popup-edit",{model:{value:t.photo_prev,callback:function(e){t.photo_prev=e},expression:"photo_prev"}},[n("q-file",{staticStyle:{width:"300px"},attrs:{label:"ជ្រើសរើសរូបភាព",outlined:"",square:"",accept:"image/*",dense:"","lazy-rules":"",rules:[function(t){return!!t||"សូមជ្រើសរើស"}]},on:{input:t.photoFn},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"attach_file"}})]},proxy:!0}]),model:{value:t.photo_prev,callback:function(e){t.photo_prev=e},expression:"photo_prev"}})],1)],1)],1)]),n("q-table",{attrs:{title:"ព័ត៌មានទូទៅ",data:t.personal_data,columns:t.columns_default,"rows-per-page-options":[0],"hide-bottom":""},scopedSlots:t._u([{key:"body",fn:function(e){return[n("q-tr",{attrs:{props:e}},[n("q-td",{key:"lname",attrs:{props:e}},[t._v("\n              "+t._s(e.row.lname)+"\n              "),n("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(a){var o=a.initialValue,i=a.value,r=(a.emitValue,a.validate,a.set),l=a.cancel;return[n("q-input",{attrs:{dense:"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),l(t)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:o===i},on:{click:[function(t){return t.stopPropagation(),r(t)},function(n){return t.updatePatient({id:t.data._id,data:{lname:e.row.lname}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.lname,callback:function(n){t.$set(e.row,"lname",n)},expression:"props.row.lname"}})]}}],null,!0),model:{value:e.row.lname,callback:function(n){t.$set(e.row,"lname",n)},expression:"props.row.lname"}})],1),n("q-td",{key:"fname",attrs:{props:e}},[t._v("\n              "+t._s(e.row.fname)+"\n              "),n("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(a){var o=a.initialValue,i=a.value,r=(a.emitValue,a.validate,a.set),l=a.cancel;return[n("q-input",{attrs:{dense:"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),l(t)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:o===i},on:{click:[function(t){return t.stopPropagation(),r(t)},function(n){return t.updatePatient({id:t.data._id,data:{fname:e.row.fname}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.fname,callback:function(n){t.$set(e.row,"fname",n)},expression:"props.row.fname"}})]}}],null,!0),model:{value:e.row.fname,callback:function(n){t.$set(e.row,"fname",n)},expression:"props.row.fname"}})],1),n("q-td",{key:"llatin",attrs:{props:e}},[t._v("\n              "+t._s(e.row.llatin)+"\n              "),n("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(a){var o=a.initialValue,i=a.value,r=(a.emitValue,a.validate,a.set),l=a.cancel;return[n("q-input",{attrs:{dense:"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),l(t)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:o===i},on:{click:[function(t){return t.stopPropagation(),r(t)},function(n){return t.updatePatient({id:t.data._id,data:{llatin:e.row.llatin}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.llatin,callback:function(n){t.$set(e.row,"llatin",n)},expression:"props.row.llatin"}})]}}],null,!0),model:{value:e.row.llatin,callback:function(n){t.$set(e.row,"llatin",n)},expression:"props.row.llatin"}})],1),n("q-td",{key:"flatin",attrs:{props:e}},[t._v("\n              "+t._s(e.row.flatin)+"\n              "),n("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(a){var o=a.initialValue,i=a.value,r=(a.emitValue,a.validate,a.set),l=a.cancel;return[n("q-input",{attrs:{dense:"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),l(t)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:o===i},on:{click:[function(t){return t.stopPropagation(),r(t)},function(n){return t.updatePatient({id:t.data._id,data:{flatin:e.row.flatin}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.flatin,callback:function(n){t.$set(e.row,"flatin",n)},expression:"props.row.flatin"}})]}}],null,!0),model:{value:e.row.flatin,callback:function(n){t.$set(e.row,"flatin",n)},expression:"props.row.flatin"}})],1),n("q-td",{key:"gender",attrs:{props:e}},[t._v("\n              "+t._s(e.row.gender)+"\n              "),n("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(a){var o=a.initialValue,i=a.value,r=(a.emitValue,a.validate,a.set),l=a.cancel;return[n("q-select",{attrs:{outlined:"",label:"ភេទ",options:["ប្រុស","ស្រី"],square:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),l(t)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:o===i},on:{click:[function(t){return t.stopPropagation(),r(t)},function(n){return t.updatePatient({id:t.data._id,data:{gender:e.row.gender}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.gender,callback:function(n){t.$set(e.row,"gender",n)},expression:"props.row.gender"}})]}}],null,!0),model:{value:e.row.gender,callback:function(n){t.$set(e.row,"gender",n)},expression:"props.row.gender"}})],1),n("q-td",{key:"dob",attrs:{props:e}},[t._v("\n              "+t._s(e.row.dob)+"\n              "),n("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(a){var o=a.initialValue,i=a.value,r=(a.emitValue,a.validate,a.set),l=a.cancel;return[n("q-input",{attrs:{dense:"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),l(t)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:o===i},on:{click:[function(t){return t.stopPropagation(),r(t)},function(n){return t.updatePatient({id:t.data._id,data:{dob:e.row.dob}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.dob,callback:function(n){t.$set(e.row,"dob",n)},expression:"props.row.dob"}})]}}],null,!0),model:{value:e.row.dob,callback:function(n){t.$set(e.row,"dob",n)},expression:"props.row.dob"}})],1),n("q-td",{key:"national_id",attrs:{props:e}},[t._v("\n              "+t._s(e.row.national_id)+"\n              "),n("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(a){var o=a.initialValue,i=a.value,r=(a.emitValue,a.validate,a.set),l=a.cancel;return[n("q-input",{attrs:{dense:"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),l(t)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:o===i},on:{click:[function(t){return t.stopPropagation(),r(t)},function(n){return t.updatePatient({id:t.data._id,data:{national_id:e.row.national_id}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.national_id,callback:function(n){t.$set(e.row,"national_id",n)},expression:"props.row.national_id"}})]}}],null,!0),model:{value:e.row.national_id,callback:function(n){t.$set(e.row,"national_id",n)},expression:"props.row.national_id"}})],1)],1)]}}])})],1),n("q-card-section",[n("q-table",{attrs:{title:"ទំនាក់ទំនង",data:t.personal_data,columns:t.columns_contact,"rows-per-page-options":[0],"hide-header":"","hide-bottom":""},scopedSlots:t._u([{key:"body",fn:function(e){return[n("q-tr",{attrs:{props:e}},[n("q-td",{key:"contact",attrs:{props:e}},[n("q-input",{staticClass:"col",attrs:{type:"textarea",rows:"4",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:e.row.contact,callback:function(n){t.$set(e.row,"contact",n)},expression:" props.row.contact"}}),n("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(a){var o=a.initialValue,i=a.value,r=(a.emitValue,a.validate,a.set),l=a.cancel;return[n("q-input",{attrs:{type:"textarea",rows:"4",dense:"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),l(t)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:o===i},on:{click:[function(t){return t.stopPropagation(),r(t)},function(n){return t.updatePatient({id:t.data._id,data:{contact:e.row.contact}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.contact,callback:function(n){t.$set(e.row,"contact",n)},expression:"props.row.contact"}})]}}],null,!0),model:{value:e.row.contact,callback:function(n){t.$set(e.row,"contact",n)},expression:"props.row.contact"}})],1)],1)]}}])})],1),n("q-card-section",[n("q-table",{attrs:{title:"អាស័យដ្ឋាន",data:t.address_data,columns:t.columns_address,"rows-per-page-options":[0],"hide-bottom":""},scopedSlots:t._u([{key:"body",fn:function(e){return[n("q-tr",{attrs:{props:e}},[n("q-td",{key:"type",attrs:{props:e}},[t._v("\n              "+t._s(e.row.type)+"\n            ")]),n("q-td",{key:"province",attrs:{props:e}},[t._v("\n              "+t._s(e.row.province)+"\n            ")]),n("q-td",{key:"district",attrs:{props:e}},[t._v("\n              "+t._s(e.row.district)+"\n            ")]),n("q-td",{key:"commune",attrs:{props:e}},[t._v("\n              "+t._s(e.row.commune)+"\n            ")]),n("q-td",{key:"village",attrs:{props:e}},[t._v("\n              "+t._s(e.row.village)+"\n            ")]),n("q-td",{key:"_id",attrs:{props:e}},[n("q-btn",{attrs:{dense:"",round:"",flat:"",color:"primary",icon:"edit"}}),n("q-popup-edit",{attrs:{validate:function(t){return!!t}},scopedSlots:t._u([{key:"default",fn:function(a){var o=a.initialValue,i=a.value,r=(a.emitValue,a.validate),l=a.set,c=a.cancel;return[n("q-select",{attrs:{"use-input":"",outlined:"",label:"ជ្រើសរើស អាស័យដ្ឋាន",options:t.optionsAddressBook,square:""},on:{filter:t.filterFnAddressBook},scopedSlots:t._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),c(t)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:!1===r(i)||o===i},on:{click:[function(t){return t.stopPropagation(),l(t)},function(n){return t.updatePatient({id:t.data._id,data:{current_address_book:e.row._id.value}})}]}})]},proxy:!0}],null,!0),model:{value:e.row._id,callback:function(n){t.$set(e.row,"_id",n)},expression:"props.row._id"}})]}}],null,!0),model:{value:e.row._id,callback:function(n){t.$set(e.row,"_id",n)},expression:"props.row._id"}})],1)],1)]}}])})],1)],1)],1)},o=[],i=n("c47a"),r=n.n(i),l=[{align:"left",name:"lname",label:"នាមត្រកូល",field:"lname"},{align:"left",name:"fname",label:"នាមខ្លួន",field:"fname"},{align:"left",name:"llatin",label:"នាមត្រកូល",field:"llatin"},{align:"left",name:"flatin",label:"នាមខ្លួន",field:"flatin"},{align:"left",name:"gender",label:"ភេទ",field:"gender"},{align:"left",name:"dob",label:"ថ្ងៃខែឆ្នាំកំណើត",field:"dob"},{align:"left",name:"national_id",label:"លេខអត្តសញ្ញាណប័ណ្ឌ",field:"national_id"}],c=[{align:"left",name:"contact",field:"contact"}],s=[{align:"left",name:"type",label:"ប្រភេទ",field:"type"},{align:"left",name:"province",label:"ខេត្ត/ក្រុង",field:"province"},{align:"left",name:"district",label:"ស្រុក/ខណ្ឌ",field:"district"},{align:"left",name:"commune",label:"ឃំុ/សង្កាត់",field:"commune"},{align:"left",name:"village",label:"ភូមិ",field:"village"},{align:"left",name:"_id",field:"_id"}],d={name:"PatientEdit",data:function(){return{dataPhoto:new FormData,columns_default:l,columns_contact:c,columns_address:s,photo_prev:null,personal_data:[],address_data:[],optionsAddressBook:[],data:r()({_id:null,current_address_book:[],dob:"14/06/2020",contact:"nakvannamcu@gmail.com",facebook:"Nak Vanna",flatin:"Vanna",fname:"វណ្ណា",gender:"ប្រុស",hostname:"https://api.visai.cloudware.com.kh/",llatin:"Nak",lname:"ណាក់",national_id:"5656645235",photo:"files/1592146267210-hoodie-guy-with-wings-kx.jpg",tel:"0969392312",telegram:"0969392312"},"contact","")}},computed:{getAddressBooks:function(){return this.$store.getters["address_book/getAddressBook"].map((function(t){return{value:t._id,label:"".concat(t.province," - ").concat(t.district," - ").concat(t.commune," - ").concat(t.village)}}))}},created:function(){var t=this,e=t.data;t.$store.dispatch("patient/editPatient",t.$route.params.id).then((function(n){e._id=n.data._id,e.current_address_book=n.data.current_address_book,e.dob=n.data.dob,e.contact=n.data.contact,e.facebook=n.data.facebook,e.flatin=n.data.flatin,e.fname=n.data.fname,e.gender=n.data.gender,e.llatin=n.data.llatin,e.lname=n.data.lname,e.national_id=n.data.national_id,e.photo=n.data.photo,e.tel=n.data.tel,e.telegram=n.data.telegram,t.personal_data=[],t.personal_data.push(n.data),t.address_data=[];var a=n.data.current_address_book;t.address_data.push({type:"អាស័យដ្ឋានបច្ចុប្បន្ន",_id:{value:a._id,label:"".concat(a.province," - ").concat(a.district," - ").concat(a.commune," - ").concat(a.village)},province:a.province,district:a.district,commune:a.commune,village:a.village})}))},methods:{photoFn:function(t){var e=this;e.dataPhoto.set("id",e.data._id),e.dataPhoto.set("photo",t);var n=new FileReader;n.readAsDataURL(t),n.onload=function(){e.data.photo=n.result,e.data.hostname=""},e.updatePatientFile(e.dataPhoto)},filterFnAddressBook:function(t,e,n){var a=this;e((function(){var e=t.toLowerCase();a.optionsAddressBook=a.getAddressBooks.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1}))}))},updatePatient:function(t){var e=this;e.$store.dispatch("patient/updatePatient",t).then((function(t){t.status?e.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:t.message}):e.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.message})}))},updatePatientFile:function(t){var e=this;t.set("id",e.data._id),e.$store.dispatch("patient/updatePatientThumbnail",t).then((function(t){t.status?e.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:t.message}):e.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.message})}))}}},u=d,p=n("2877"),f=n("eebe"),k=n.n(f),_=n("9989"),m=n("f09f"),v=n("4b7e"),b=n("9c40"),g=n("05c0"),y=n("a370"),w=n("068f"),q=n("42a1"),h=n("7d53"),x=n("0016"),P=n("eaac"),$=n("bd08"),S=n("db86"),V=n("27f9"),C=n("ddd8"),Q=n("2eeb"),E=Object(p["a"])(u,a,o,!1,null,"0fbf68da",null);e["default"]=E.exports;k()(E,"components",{QPage:_["a"],QCard:m["a"],QCardActions:v["a"],QBtn:b["a"],QTooltip:g["a"],QCardSection:y["a"],QImg:w["a"],QPopupEdit:q["a"],QFile:h["a"],QIcon:x["a"],QTable:P["a"],QTr:$["a"],QTd:S["a"],QInput:V["a"],QSelect:C["a"]}),k()(E,"directives",{GoBack:Q["a"]})}}]);