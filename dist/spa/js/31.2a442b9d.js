(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{2088:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",[n("q-card",[n("q-card-actions",{attrs:{align:"left"}},[n("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],staticStyle:{width:"150px"},attrs:{color:"red",icon:"reply",label:"ត្រឡប់ក្រោយ"}},[n("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("ថយក្រោយ")])],1)],1),n("q-card-section",[n("q-img",{staticStyle:{height:"200px","max-width":"200px"},attrs:{src:t.data.hostname+t.data.photo}},[n("div",{staticClass:"absolute-bottom text-right no-padding"},[n("q-btn",{attrs:{icon:"edit",label:"កែប្រែ",flat:""}},[n("q-popup-edit",{model:{value:t.photo_prev,callback:function(e){t.photo_prev=e},expression:"photo_prev"}},[n("q-file",{staticStyle:{width:"300px"},attrs:{label:"ជ្រើសរើសរូបភាព",outlined:"",square:"",accept:"image/*",dense:"","lazy-rules":"",rules:[function(t){return!!t||"សូមជ្រើសរើស"}]},on:{input:t.photoFn},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"attach_file"}})]},proxy:!0}]),model:{value:t.photo_prev,callback:function(e){t.photo_prev=e},expression:"photo_prev"}})],1)],1)],1)]),n("q-table",{attrs:{title:"ព័ត៌មានទូទៅ",data:t.product_data,columns:t.columns_default1,"rows-per-page-options":[0],"hide-bottom":""},scopedSlots:t._u([{key:"body",fn:function(e){return[n("q-tr",{attrs:{props:e}},[n("q-td",{key:"name",attrs:{props:e}},[t._v("\n              "+t._s(e.row.name)+"\n              "),n("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(o){var a=o.initialValue,r=o.value,i=(o.emitValue,o.validate,o.set),c=o.cancel;return[n("q-input",{attrs:{dense:"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),c(t)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(t){return t.stopPropagation(),i(t)},function(n){return t.updateProduct({id:t.data._id,data:{name:e.row.name}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.name,callback:function(n){t.$set(e.row,"name",n)},expression:"props.row.name"}})]}}],null,!0),model:{value:e.row.name,callback:function(n){t.$set(e.row,"name",n)},expression:"props.row.name"}})],1),n("q-td",{key:"type",attrs:{props:e}},[t._v("\n              "+t._s(e.row.type)+"\n              "),n("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(o){var a=o.initialValue,r=o.value,i=(o.emitValue,o.validate,o.set),c=o.cancel;return[n("q-select",{attrs:{outlined:"",label:"ប្រភេទ",options:t.getProductTypes,square:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),c(t)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(t){return t.stopPropagation(),i(t)},function(n){return t.updateProduct({id:t.data._id,data:{type:e.row.type}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.type,callback:function(n){t.$set(e.row,"type",n)},expression:"props.row.type"}})]}}],null,!0),model:{value:e.row.type,callback:function(n){t.$set(e.row,"type",n)},expression:"props.row.type"}})],1),n("q-td",{key:"unit",attrs:{props:e}},[t._v("\n              "+t._s(e.row.unit)+"\n              "),n("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(o){var a=o.initialValue,r=o.value,i=(o.emitValue,o.validate,o.set),c=o.cancel;return[n("q-select",{attrs:{outlined:"",label:"ប្រភេទ",options:t.getUnitTypes,square:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),c(t)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(t){return t.stopPropagation(),i(t)},function(n){return t.updateProduct({id:t.data._id,data:{unit:e.row.unit}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.unit,callback:function(n){t.$set(e.row,"unit",n)},expression:"props.row.unit"}})]}}],null,!0),model:{value:e.row.unit,callback:function(n){t.$set(e.row,"unit",n)},expression:"props.row.unit"}})],1)],1)]}}])})],1),n("q-card-section",[n("q-table",{attrs:{data:t.product_data,columns:t.columns_default2,"rows-per-page-options":[0],"hide-bottom":""},scopedSlots:t._u([{key:"body",fn:function(e){return[n("q-tr",{attrs:{props:e}},[n("q-td",{key:"buy_price",attrs:{props:e}},[t._v("\n              "+t._s(e.row.buy_price)+"\n              "),n("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(o){var a=o.initialValue,r=o.value,i=(o.emitValue,o.validate,o.set),c=o.cancel;return[n("q-input",{attrs:{type:"number",dense:"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),c(t)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(t){return t.stopPropagation(),i(t)},function(n){return t.updateProduct({id:t.data._id,data:{buy_price:e.row.buy_price}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.buy_price,callback:function(n){t.$set(e.row,"buy_price",n)},expression:"props.row.buy_price"}})]}}],null,!0),model:{value:e.row.buy_price,callback:function(n){t.$set(e.row,"buy_price",n)},expression:"props.row.buy_price"}})],1),n("q-td",{key:"sale_price",attrs:{props:e}},[t._v("\n              "+t._s(e.row.sale_price)+"\n              "),n("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(o){var a=o.initialValue,r=o.value,i=(o.emitValue,o.validate,o.set),c=o.cancel;return[n("q-input",{attrs:{type:"number",dense:"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),c(t)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(t){return t.stopPropagation(),i(t)},function(n){return t.updateProduct({id:t.data._id,data:{sale_price:e.row.sale_price}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.sale_price,callback:function(n){t.$set(e.row,"sale_price",n)},expression:"props.row.sale_price"}})]}}],null,!0),model:{value:e.row.sale_price,callback:function(n){t.$set(e.row,"sale_price",n)},expression:"props.row.sale_price"}})],1),n("q-td",{key:"invent_type",attrs:{props:e}},[t._v("\n              "+t._s(e.row.invent_type)+"\n              "),n("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(o){var a=o.initialValue,r=o.value,i=(o.emitValue,o.validate,o.set),c=o.cancel;return[n("q-select",{attrs:{outlined:"",label:"ប្រភេទ",options:["Inventory-Part","Service","Sale-Only","Purchase-Only"],square:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),c(t)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(t){return t.stopPropagation(),i(t)},function(n){return t.updateProduct({id:t.data._id,data:{invent_type:e.row.invent_type}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.invent_type,callback:function(n){t.$set(e.row,"invent_type",n)},expression:"props.row.invent_type"}})]}}],null,!0),model:{value:e.row.invent_type,callback:function(n){t.$set(e.row,"invent_type",n)},expression:"props.row.invent_type"}})],1),n("q-td",{key:"stock_alert",attrs:{props:e}},[t._v("\n              "+t._s(e.row.stock_alert)+"\n              "),n("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(o){var a=o.initialValue,r=o.value,i=(o.emitValue,o.validate,o.set),c=o.cancel;return[n("q-input",{attrs:{type:"number",dense:"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),c(t)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(t){return t.stopPropagation(),i(t)},function(n){return t.updateProduct({id:t.data._id,data:{stock_alert:e.row.stock_alert}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.stock_alert,callback:function(n){t.$set(e.row,"stock_alert",n)},expression:"props.row.stock_alert"}})]}}],null,!0),model:{value:e.row.stock_alert,callback:function(n){t.$set(e.row,"stock_alert",n)},expression:"props.row.stock_alert"}})],1)],1)]}}])})],1),n("q-card-section",[n("q-table",{attrs:{data:t.product_data,columns:t.columns_default3,"rows-per-page-options":[0],"hide-bottom":""},scopedSlots:t._u([{key:"body",fn:function(e){return[n("q-tr",{attrs:{props:e}},[n("q-td",{key:"description",attrs:{props:e}},[t._v("\n              "+t._s(e.row.description)+"\n              "),n("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(o){var a=o.initialValue,r=o.value,i=(o.emitValue,o.validate,o.set),c=o.cancel;return[n("q-input",{attrs:{type:"textarea",dense:"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),c(t)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(t){return t.stopPropagation(),i(t)},function(n){return t.updateProduct({id:t.data._id,data:{description:e.row.description}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.description,callback:function(n){t.$set(e.row,"description",n)},expression:"props.row.description"}})]}}],null,!0),model:{value:e.row.description,callback:function(n){t.$set(e.row,"description",n)},expression:"props.row.description"}})],1)],1)]}}])})],1)],1)],1)},a=[],r=(n("a4eb"),[{align:"left",name:"name",label:"ឈ្មោះទំនិញ",field:"name"},{align:"left",name:"type",label:"ប្រភេទ",field:"type"},{align:"left",name:"unit",label:"ឯកតា",field:"unit"}]),i=[{align:"left",name:"buy_price",label:"តម្លៃទិញ",field:"buy_price"},{align:"left",name:"sale_price",label:"តម្លៃលក់",field:"sale_price"},{align:"left",name:"invent_type",label:"ស្ដុក",field:"invent_type"},{align:"left",name:"stock_alert",label:"ស្ដុកជូនដំណឹង",field:"stock_alert"}],c=[{align:"left",name:"description",label:"ចំណាំ",field:"description"}],l={name:"ProductEdit",data:function(){return{dataPhoto:new FormData,photo_prev:null,product_data:[],columns_default1:r,columns_default2:i,columns_default3:c,data:{_id:null,hostname:"",photo:""}}},computed:{getProductTypes:function(){return this.$store.getters["product/getProductTypes"].map((function(t){return t.name}))},getUnitTypes:function(){return this.$store.getters["product/getUnitTypes"].map((function(t){return t.name}))}},methods:{photoFn:function(t){var e=this;e.dataPhoto.set("id",e.data._id),e.dataPhoto.set("photo",t);var n=new FileReader;n.readAsDataURL(t),n.onload=function(){e.data.photo=n.result,e.data.hostname=""},e.updateProductFile(e.dataPhoto)},updateProductFile:function(t){var e=this;t.set("id",e.data._id),e.$store.dispatch("product/updateProductThumbnail",t).then((function(t){t.status?e.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:t.message}):e.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.message})}))},updateProduct:function(t){var e=this;e.$store.dispatch("product/updateProduct",t).then((function(t){t.status?e.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:t.message}):e.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.message})}))}},created:function(){var t=this,e=t.data;t.$store.dispatch("product/editProduct",t.$route.params.id).then((function(n){e.hostname=n.data.hostname,e.photo=n.data.photo,e._id=n.data._id,t.product_data=[],t.product_data.push(n.data)}))}},s=l,u=n("7a99"),p=n("3d2d"),d=n.n(p),f=n("7441"),y=n("60e8"),_=n("49db"),k=n("31c6"),v=n("c150"),b=n("81d0"),m=n("de2d"),w=n("e135"),g=n("2a34"),q=n("3cf2"),h=n("86ca"),P=n("c62b"),x=n("fefc"),S=n("8e7c"),$=n("17bc"),C=n("5879"),V=Object(u["a"])(s,o,a,!1,null,"8dce1024",null);e["default"]=V.exports;d()(V,"components",{QPage:f["a"],QCard:y["a"],QCardActions:_["a"],QBtn:k["a"],QTooltip:v["a"],QCardSection:b["a"],QImg:m["a"],QPopupEdit:w["a"],QFile:g["a"],QIcon:q["a"],QTable:h["a"],QTr:P["a"],QTd:x["a"],QInput:S["a"],QSelect:$["a"]}),d()(V,"directives",{GoBack:C["a"]})}}]);