(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[27],{ff1f:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",[n("q-card",[n("q-card-actions",{attrs:{align:"left"}},[n("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],staticStyle:{width:"150px"},attrs:{color:"red",icon:"reply",label:"ត្រឡប់ក្រោយ"}},[n("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("ថយក្រោយ")])],1)],1),n("q-card-section",[n("q-img",{staticStyle:{height:"200px","max-width":"200px"},attrs:{src:e.data.hostname+e.data.photo}},[n("div",{staticClass:"absolute-bottom text-right no-padding"},[n("q-btn",{attrs:{icon:"edit",label:"កែប្រែ",flat:""}},[n("q-popup-edit",{model:{value:e.photo_prev,callback:function(t){e.photo_prev=t},expression:"photo_prev"}},[n("q-file",{staticStyle:{width:"300px"},attrs:{label:"ជ្រើសរើសរូបភាព",outlined:"",square:"",accept:"image/*",dense:"","lazy-rules":"",rules:[function(e){return!!e||"សូមជ្រើសរើស"}]},on:{input:e.photoFn},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"attach_file"}})]},proxy:!0}]),model:{value:e.photo_prev,callback:function(t){e.photo_prev=t},expression:"photo_prev"}})],1)],1)],1)]),n("q-table",{attrs:{title:"ព័ត៌មានទូទៅ",data:e.personal_data,columns:e.columns_default,"rows-per-page-options":[0],"hide-bottom":""},scopedSlots:e._u([{key:"body",fn:function(t){return[n("q-tr",{attrs:{props:t}},[n("q-td",{key:"lname",attrs:{props:t}},[e._v("\n              "+e._s(t.row.lname)+"\n              "),n("q-popup-edit",{scopedSlots:e._u([{key:"default",fn:function(o){var a=o.initialValue,r=o.value,i=(o.emitValue,o.validate,o.set),l=o.cancel;return[n("q-input",{attrs:{dense:"",autofocus:""},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.stopPropagation()}},scopedSlots:e._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(e){return e.stopPropagation(),l(e)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(e){return e.stopPropagation(),i(e)},function(n){return e.updatePatient({id:e.data._id,data:{lname:t.row.lname}})}]}})]},proxy:!0}],null,!0),model:{value:t.row.lname,callback:function(n){e.$set(t.row,"lname",n)},expression:"props.row.lname"}})]}}],null,!0),model:{value:t.row.lname,callback:function(n){e.$set(t.row,"lname",n)},expression:"props.row.lname"}})],1),n("q-td",{key:"fname",attrs:{props:t}},[e._v("\n              "+e._s(t.row.fname)+"\n              "),n("q-popup-edit",{scopedSlots:e._u([{key:"default",fn:function(o){var a=o.initialValue,r=o.value,i=(o.emitValue,o.validate,o.set),l=o.cancel;return[n("q-input",{attrs:{dense:"",autofocus:""},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.stopPropagation()}},scopedSlots:e._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(e){return e.stopPropagation(),l(e)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(e){return e.stopPropagation(),i(e)},function(n){return e.updatePatient({id:e.data._id,data:{fname:t.row.fname}})}]}})]},proxy:!0}],null,!0),model:{value:t.row.fname,callback:function(n){e.$set(t.row,"fname",n)},expression:"props.row.fname"}})]}}],null,!0),model:{value:t.row.fname,callback:function(n){e.$set(t.row,"fname",n)},expression:"props.row.fname"}})],1),n("q-td",{key:"llatin",attrs:{props:t}},[e._v("\n              "+e._s(t.row.llatin)+"\n              "),n("q-popup-edit",{scopedSlots:e._u([{key:"default",fn:function(o){var a=o.initialValue,r=o.value,i=(o.emitValue,o.validate,o.set),l=o.cancel;return[n("q-input",{attrs:{dense:"",autofocus:""},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.stopPropagation()}},scopedSlots:e._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(e){return e.stopPropagation(),l(e)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(e){return e.stopPropagation(),i(e)},function(n){return e.updatePatient({id:e.data._id,data:{llatin:t.row.llatin}})}]}})]},proxy:!0}],null,!0),model:{value:t.row.llatin,callback:function(n){e.$set(t.row,"llatin",n)},expression:"props.row.llatin"}})]}}],null,!0),model:{value:t.row.llatin,callback:function(n){e.$set(t.row,"llatin",n)},expression:"props.row.llatin"}})],1),n("q-td",{key:"flatin",attrs:{props:t}},[e._v("\n              "+e._s(t.row.flatin)+"\n              "),n("q-popup-edit",{scopedSlots:e._u([{key:"default",fn:function(o){var a=o.initialValue,r=o.value,i=(o.emitValue,o.validate,o.set),l=o.cancel;return[n("q-input",{attrs:{dense:"",autofocus:""},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.stopPropagation()}},scopedSlots:e._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(e){return e.stopPropagation(),l(e)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(e){return e.stopPropagation(),i(e)},function(n){return e.updatePatient({id:e.data._id,data:{flatin:t.row.flatin}})}]}})]},proxy:!0}],null,!0),model:{value:t.row.flatin,callback:function(n){e.$set(t.row,"flatin",n)},expression:"props.row.flatin"}})]}}],null,!0),model:{value:t.row.flatin,callback:function(n){e.$set(t.row,"flatin",n)},expression:"props.row.flatin"}})],1),n("q-td",{key:"gender",attrs:{props:t}},[e._v("\n              "+e._s(t.row.gender)+"\n              "),n("q-popup-edit",{scopedSlots:e._u([{key:"default",fn:function(o){var a=o.initialValue,r=o.value,i=(o.emitValue,o.validate,o.set),l=o.cancel;return[n("q-select",{attrs:{outlined:"",label:"ភេទ",options:["ប្រុស","ស្រី"],square:""},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.stopPropagation()}},scopedSlots:e._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(e){return e.stopPropagation(),l(e)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(e){return e.stopPropagation(),i(e)},function(n){return e.updatePatient({id:e.data._id,data:{gender:t.row.gender}})}]}})]},proxy:!0}],null,!0),model:{value:t.row.gender,callback:function(n){e.$set(t.row,"gender",n)},expression:"props.row.gender"}})]}}],null,!0),model:{value:t.row.gender,callback:function(n){e.$set(t.row,"gender",n)},expression:"props.row.gender"}})],1),n("q-td",{key:"dob",attrs:{props:t}},[e._v("\n              "+e._s(t.row.dob)+"\n              "),n("q-popup-edit",{scopedSlots:e._u([{key:"default",fn:function(o){var a=o.initialValue,r=o.value,i=(o.emitValue,o.validate,o.set),l=o.cancel;return[n("q-input",{attrs:{dense:"",autofocus:""},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.stopPropagation()}},scopedSlots:e._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(e){return e.stopPropagation(),l(e)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(e){return e.stopPropagation(),i(e)},function(n){return e.updatePatient({id:e.data._id,data:{dob:t.row.dob}})}]}})]},proxy:!0}],null,!0),model:{value:t.row.dob,callback:function(n){e.$set(t.row,"dob",n)},expression:"props.row.dob"}})]}}],null,!0),model:{value:t.row.dob,callback:function(n){e.$set(t.row,"dob",n)},expression:"props.row.dob"}})],1),n("q-td",{key:"phone",attrs:{props:t}},[e._v("\n              "+e._s(t.row.phone)+"\n              "),n("q-popup-edit",{scopedSlots:e._u([{key:"default",fn:function(o){var a=o.initialValue,r=o.value,i=(o.emitValue,o.validate,o.set),l=o.cancel;return[n("q-input",{attrs:{dense:"",autofocus:""},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.stopPropagation()}},scopedSlots:e._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(e){return e.stopPropagation(),l(e)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(e){return e.stopPropagation(),i(e)},function(n){return e.updatePatient({id:e.data._id,data:{phone:t.row.phone}})}]}})]},proxy:!0}],null,!0),model:{value:t.row.phone,callback:function(n){e.$set(t.row,"phone",n)},expression:"props.row.phone"}})]}}],null,!0),model:{value:t.row.phone,callback:function(n){e.$set(t.row,"phone",n)},expression:"props.row.phone"}})],1)],1)]}}])})],1),n("q-card-section",[n("q-table",{attrs:{title:"អាស័យដ្ឋាន",data:e.address_data,columns:e.columns_address,"rows-per-page-options":[0],"hide-bottom":""},scopedSlots:e._u([{key:"body",fn:function(t){return[n("q-tr",{attrs:{props:t}},[n("q-td",{key:"type",attrs:{props:t}},[e._v("\n              "+e._s(t.row.type)+"\n            ")]),n("q-td",{key:"province",attrs:{props:t}},[e._v("\n              "+e._s(t.row.province)+"\n            ")]),n("q-td",{key:"district",attrs:{props:t}},[e._v("\n              "+e._s(t.row.district)+"\n            ")]),n("q-td",{key:"commune",attrs:{props:t}},[e._v("\n              "+e._s(t.row.commune)+"\n            ")]),n("q-td",{key:"village",attrs:{props:t}},[e._v("\n              "+e._s(t.row.village)+"\n            ")]),n("q-td",{key:"_id",attrs:{props:t}},[n("q-btn",{attrs:{dense:"",round:"",flat:"",color:"primary",icon:"edit"}}),n("q-popup-edit",{attrs:{validate:function(e){return!!e}},scopedSlots:e._u([{key:"default",fn:function(o){var a=o.initialValue,r=o.value,i=(o.emitValue,o.validate),l=o.set,s=o.cancel;return[n("q-select",{attrs:{"use-input":"",outlined:"",label:"ជ្រើសរើស អាស័យដ្ឋាន",options:e.optionsAddressBook,square:""},on:{filter:e.filterFnAddressBook},scopedSlots:e._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(e){return e.stopPropagation(),s(e)}}}),n("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:!1===i(r)||a===r},on:{click:[function(e){return e.stopPropagation(),l(e)},function(n){return e.updatePatient({id:e.data._id,data:{current_address_book:t.row._id.value}})}]}})]},proxy:!0}],null,!0),model:{value:t.row._id,callback:function(n){e.$set(t.row,"_id",n)},expression:"props.row._id"}})]}}],null,!0),model:{value:t.row._id,callback:function(n){e.$set(t.row,"_id",n)},expression:"props.row._id"}})],1)],1)]}}])})],1)],1)],1)},a=[],r=[{align:"left",name:"lname",label:"នាមត្រកូល",field:"lname"},{align:"left",name:"fname",label:"នាមខ្លួន",field:"fname"},{align:"left",name:"llatin",label:"នាមត្រកូល",field:"llatin"},{align:"left",name:"flatin",label:"នាមខ្លួន",field:"flatin"},{align:"left",name:"gender",label:"ភេទ",field:"gender"},{align:"left",name:"dob",label:"ថ្ងៃខែឆ្នាំកំណើត",field:"dob"},{align:"left",name:"phone",label:"លេខអត្តសញ្ញាណប័ណ្ឌ",field:"phone"}],i=[{align:"left",name:"type",label:"ប្រភេទ",field:"type"},{align:"left",name:"province",label:"ខេត្ត/ក្រុង",field:"province"},{align:"left",name:"district",label:"ស្រុក/ខណ្ឌ",field:"district"},{align:"left",name:"commune",label:"ឃំុ/សង្កាត់",field:"commune"},{align:"left",name:"village",label:"ភូមិ",field:"village"},{align:"left",name:"_id",field:"_id"}],l={name:"PatientEdit",data:function(){return{dataPhoto:new FormData,columns_default:r,columns_address:i,photo_prev:null,personal_data:[],address_data:[],optionsAddressBook:[],data:{_id:null,current_address_book:[],dob:"14/06/2020",facebook:"Nak Vanna",flatin:"Vanna",fname:"វណ្ណា",gender:"ប្រុស",hostname:"https://api.hospital.demo.cloudware.com.kh/",llatin:"Nak",lname:"ណាក់",phone:"5656645235",photo:"files/patients-icon-7.jpg"}}},computed:{getAddressBooks:function(){return this.$store.getters["address_book/getAddressBook"].map((function(e){return{value:e._id,label:"".concat(e.province," - ").concat(e.district," - ").concat(e.commune," - ").concat(e.village)}}))}},created:function(){var e=this,t=e.data;e.$store.dispatch("patient/editPatient",e.$route.params.id).then((function(n){t._id=n.data._id,t.current_address_book=n.data.current_address_book,t.dob=n.data.dob,t.contact=n.data.contact,t.facebook=n.data.facebook,t.flatin=n.data.flatin,t.fname=n.data.fname,t.gender=n.data.gender,t.llatin=n.data.llatin,t.lname=n.data.lname,t.phone=n.data.phone,t.photo=n.data.photo,t.tel=n.data.tel,t.telegram=n.data.telegram,e.personal_data=[],e.personal_data.push(n.data),e.address_data=[];var o=n.data.current_address_book;e.address_data.push({type:"អាស័យដ្ឋានបច្ចុប្បន្ន",_id:{value:o._id,label:"".concat(o.province," - ").concat(o.district," - ").concat(o.commune," - ").concat(o.village)},province:o.province,district:o.district,commune:o.commune,village:o.village})}))},methods:{photoFn:function(e){var t=this;t.dataPhoto.set("id",t.data._id),t.dataPhoto.set("photo",e);var n=new FileReader;n.readAsDataURL(e),n.onload=function(){t.data.photo=n.result,t.data.hostname=""},t.updatePatientFile(t.dataPhoto)},filterFnAddressBook:function(e,t,n){var o=this;t((function(){var t=e.toLowerCase();o.optionsAddressBook=o.getAddressBooks.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}))},updatePatient:function(e){var t=this;t.$store.dispatch("patient/updatePatient",e).then((function(e){e.status?t.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:e.message}):t.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:e.message})}))},updatePatientFile:function(e){var t=this;e.set("id",t.data._id),t.$store.dispatch("patient/updatePatientThumbnail",e).then((function(e){e.status?t.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:e.message}):t.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:e.message})}))}}},s=l,c=n("7a99"),d=n("3d2d"),u=n.n(d),p=n("7441"),f=n("60e8"),k=n("49db"),m=n("31c6"),_=n("c150"),v=n("81d0"),b=n("de2d"),g=n("e135"),y=n("2a34"),w=n("3cf2"),h=n("86ca"),q=n("c62b"),x=n("fefc"),P=n("8e7c"),$=n("17bc"),S=n("5879"),V=Object(c["a"])(s,o,a,!1,null,"40ef869b",null);t["default"]=V.exports;u()(V,"components",{QPage:p["a"],QCard:f["a"],QCardActions:k["a"],QBtn:m["a"],QTooltip:_["a"],QCardSection:v["a"],QImg:b["a"],QPopupEdit:g["a"],QFile:y["a"],QIcon:w["a"],QTable:h["a"],QTr:q["a"],QTd:x["a"],QInput:P["a"],QSelect:$["a"]}),u()(V,"directives",{GoBack:S["a"]})}}]);